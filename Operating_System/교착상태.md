# 교착상태(Deadlock)

> 정적인 상태의 프로그램이, 자원을 할당받아 동적인 프로세스가 된다. 하지만 CPU, 메모리 등의 자원의 양은 제한되어있기 때문에 원하는 모든 프로세스를 무제한으로 동시에 실행시키는 것은 불가능하다. 자원이 이미 다른 프로세스에 의해 점유된 상태에서, 해당 자원을 다른 프로세스들이 너도나도 요구하게 된다면, 프로세스들이 실행되지 못하고 자원 할당을 한없이 기다리는 상태에 놓이게 될 것이다. 
>
> 이번에는 이러한 '교착상태' 의 개념과 교착상태를 어떻게 해결하는 지에 대해 살펴보도록 한다.


![Deadlock - an overview | ScienceDirect Topics](https://ars.els-cdn.com/content/image/3-s2.0-B0122274105008516-gr6.gif) ![Detect Deadlocks in old NAVs - Roberto Stefanetti Blog MVP, MCT, MIE](https://i1.wp.com/robertostefanettinavblog.com/wp-content/uploads/2018/04/image022.jpg?resize=302%2C219)

### 교착상태의 개념과 발생 조건
```
상호배제 원칙으로 인해 서로의 공유자원을 프로세스들이 요구함으로써 무한정 대기하는 상황
```
- 둘 이상의 프로세스가 자원을 점유한 상태에서, 서로 다른 프로세스가 점유중인 자원을 요구하면서 무한정 기다리고 있는 현상을 말함

- 이는 __`상호배제(Mutual Exclusion)`__ 로 인해 나타나는 문제점으로, 상호배제는 __여러 프로세스가 공유하는 자원에 대해서, 특정 시점에서 한 개의 프로세스만이 공유자원을 점유할 수 있는 원칙__ 을 말함

  - 이러한 공유자원 영역을 __`임계영역(Critical Section)`__ 이라고 하며, 상호배제는 임계영역을 유지하는 기법인 셈
  - 더 나아가, 결국 상호배제로 인해 두 개이상의 프로세스를 한 시점에서 동시에 처리할 수 없는 경우, 프로세스 실행 순서를 명확히 하는 것을 __`동기화(Synchronization)`__ 라고 부르는 것

  

- 교착상태가 일어나기 위한 필요 조건은 4가지로, 여기서 하나라도 충족되지 않으면 교착상태가 발생하지 않음

  (또한 4가지 조건을 모두 충족했다고 해서 반드시 교착상태가 일어나는 것도 아님)

  - __상호배제(Mutual Exclusion)__

    - 한 번에 한 개의 프로세스만이 공유자원을 점유해야 함

  - __점유대기(Hold and Wait)__

    - 어떤 프로세스가 자원을 할당받아 배타적으로 점유하는 상황에서, 다른 프로세스가 자원을 사용하고자 할 경우에는 점유된 자원이 해제되기를 기다려야 함

  - __비선점(Non-preemption)__

    - 어떤 프로세스에 할당된 자원은, 해당 프로세스가 자원을 스스로 반환하기 전까지는 제거되지 않음
    - 다시 말해, 프로세스 종료 후에만 해제될 수 있으며 타의에 의한 해제는 불가능한 것

  - __환형대기(Circular Wait)__

    ![교착상태](https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F2505A94B595D1A332E)

    - 프로세스의 자원 점유 및 점유된 자원의 요구 관계가 환형을 이루면서 대기하는 조건을 말함
    - 자원을 점유하면서 원형 구조에서 자신의 앞 혹은 뒤에 있는 프로세스의 자원을 요구하는 상황

