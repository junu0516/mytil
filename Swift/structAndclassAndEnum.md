2022-02-24

# Struct와 Class, Enum의 차이

> Table of Contents

- struct와 class, enum의 개념 간단히
- struct와 class, enum의 차이점
- class 대신 struct를 사용하는 경우



## 1. Struct와 Class, Enum의 간단한 개념

 ### Struct (구조체)

- 구조화된 데이터를 처리하기 위한 기본적인 데이터 구조
- 여기서 __구조화__ 가 의미하는 것은, 여러 데이터가 하나의 덩어리로 처리됨을 의미함
- swift에서는 여러 인스턴스를 __프로퍼티__ 에 저장하고, 여러 기능을 __메소드__ 형태로 저장하는데, 이를 __캡슐화__ 한다고 표현함
- 기본적으로 구조체는 프로퍼티와 메소드의 집합이 되는 것

​    

### Class

- 객체 지향 프로그래밍에서 __객체 생성을 위한 변수와 메소드 집합이 정의된 일종의 '틀'로__ 이해하면 됨
  - 객체 지향 언어는 기본적으로 세상에 존재하는 모든 것을 객체의 형태로 표현하는 것을 지향함
  - 만일 세상에 존재하는 모든 쿠키를 객체에 비유하면, 클래스는 __쿠키를 찍어내기 위한 쿠키틀에 해당!__
- 클래스 또한 구조체와 마찬가지로 __여러 프로퍼티와 메소드의 집합의 형태임__

​    

### Enum(열거형)

- Enumberated Type의 줄임말로, 요소 혹은 멤버라고 불리는 여러 상수의 집합을 포함하는 자료형을 의미함
- swift에서는 __`case`__ 라는 키워드로 각각의 상수값을 표현함
- 각각의 케이스 멤버는 열거형이 채택하는 타입에 해당하는 원시값(__`rawValue`__)를 가짐

​    

## 2. Struct와 Class, Enum의 차이

<img src="https://media.vlpt.us/images/tnddls2ek/post/1b90d3c3-02e1-419e-a270-5c25a8caf0d3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-21%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2011.49.40.png" alt="image" style="width: 70%; align: center !important;"/>

- 클래스와 구조체는 모두 인스턴스를 초기화하기 위한 __생성자(__`init()`__)__ 함수를 포함하고 있지만, __열거형은 생성자가 없음__
- 클래스와 구조체 모두 프로퍼티와 메소드의 집합이지만, __상속 및 타입캐스팅, 소멸자(디이니셜라이저)의 사용은 클래스에서만 허용됨__
- __클래스는 참조타입이며, 구조체와 열거형은 값타입임__
  - 참조 횟수 계산(Reference Counting)은 따라서 클래스의 인스턴스에만 적용됨
- 단, 구조체 내부에 일정 크기 이상의 데이터가 있거나 참조 타입 변수가 있으면 구조체도 엄밀히 말해 값타임이라고 할 수 없음
  - 이런 경우에는 구조체 인스턴스도 힙 영역에 생성되기 때문에 참조 타입이 되는 것

​    

### 값타입과 참조타입?

<img src="https://img1.daumcdn.net/thumb/R300x0/?fname=https://k.kakaocdn.net/dn/d90MtS/btq0A3D9vya/XQLjt2ZcAhTklgyBK1TK9k/img.png" alt="iOS) 메모리 구조 (Code, Data, Stack, Heap)" style="zoom:150%; align: center !important;" />

- 값 타입과 참조 타입의 제일 큰 차이는 결국 __무엇을 전달하느냐__ 에 있음
- 값타입을 어떤 함수의 파라미터로 넘기면 __해당 값이 복사되어 넘겨지며__ , 참조 타입을 파라미터로 넘기면 값이 복사되는 것이 아닌 객체가 저장된 __메모리상의 주소값, 즉 참조정보가 넘겨짐__
- 보통 변수에 __값 타입 인스턴스가 할당되면 값이 스택 영역에 저장되며, 참조 타입 인스턴스를 할당하면 실제 값이 힙 영역에 저장되며 스택 영역에는 힙 영역의 레퍼런스가 할당됨__
  - 이 경우 만일 참조 타입 값을 복사하는 경우에는, 실제로 값이 복사되는 것이 아닌 참조 횟수(Reference Counting) 값이 1 증가하는 것
- swift에서 열거형 외에도 __배열, 문자열, 딕셔너리, 세트, 튜플__ 등은 모두 구조체와 같은 값타입임
- swift에서 __함수와 클로저__ 는 클래스와 동일한 참조타입임

​    

## 3. class 대신 struct를 사용해야 하는 경우

- 애플에서는 아래 4가지 상황에 대해 구조체를 사용할 것을 권장하고 있음

  - 간단한 값의 캡슐화가 목적인 경우

  - 구조체의 인스턴스가 참조되기 보다는 복사되기를 기대하는 경우

  - 구조체에 의해 저장된 어떤 프로퍼티가 참조되기 보다는 복사되기를 기대하는 경우

  - 구조체가 프로퍼티나 메소드 등을 상속할 필요가 없는 경우

- [어떤 블로그](http://seorenn.blogspot.com/2016/04/swift-class-struct.html) 에 나온 바로는 생성 속도를 측정했을 때 __구조체가 기본적으로 클래스보다 인스턴스 생성이 빠르다는__ 결과가 나타났음

- 단, 대입을 하는 경우에는 값타입 특성상 __구조체는 메모리에 저장된 값 복사가 일어나기 때문에__ __레퍼런스만 넘기면 되는 클래스의 속도가 더 빠를 수 있음__

  - 이에 대한 구체적인 이유는 추후 더 탐구해봐야 할 것 같음 ...