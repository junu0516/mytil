# Https 통신과 SSL



### 1. Https

![img](https://storage.worksmobile.com/k/whome/t/kr1.168601/168601/4000000001283909002/4000000001350922002.0.3472332412818459145/i/w700)

- **http 통신의 한계**

  - 데이터를 암호화하지 않고, 사용자가 누군지를 따로 검증하지 않기 때문에 보안에 취약함
  - 감청 혹은 데이터 변조의 가능성이 있음

- **https(Hypertext Transfer Protocol Over Secure Socket Layer)**

  - 보안이 강화된 http 통신으로 http(80번 포트)와 달리 443번 포트 사용

  - 모든 http 요청과 응답 데이터가 네트워크 계층을 거치기 전에 암호화됨

  - https는 http 하부에 SSL과 같은 보안 계층을 따로 제공하여 동작함

  - 응용계층과 전송계층 사이에 독립적인 보안 계층이 위치

  - -  다시 말해, https는 http에 보안계층이 조합된 프로토콜인 것!

  

  

### 2. SSL

- 네트워크에 통신 보안을 제공하기 위한 계층(혹은 규약)
- https 통신에서는 보안 계층을 거치면서 모든 요청 및 응답 데이터가 네트워크로 보내지기 전에 암호화됨
- 암호화 방식은 크게 대칭키 암호화, 공개키 암호화 방식이 존재
  - **대칭키 암호화 방식**
    - 암호화, 복호화에 동일한 키(대칭키)가 사용됨
    - 수신자, 송신자가 동일한 키를 공유해야 하며, 대칭키가 통신 도중 유출되면 제 3자가 암호를 복호화할 수 있기 때문에 위험

  - **공개키 암호화 방식**
    - 위에서 언급한 대칭키 암호화 방식의 단점을 극복한 방식
    - 암호화, 복호화에 서로 다른 키가 사용됨
    - A키로 암호화하면 B키로 복호화해야 하고, 반대로 B키로 암호화하면 A키로 복호화하는 방식
    - 보통 암호화에 사용되는 키는 공개되어 있음(public key)
    - 복호화에 사용되는 키(secret key)는 호스트만 알 수 있으며 이를 통해 메시지를 안전하게 주고받을 수 있는 것
    - 대신 두 개의 키를 사용하므로 계산이 대칭키 암호화에 비해 상대적으로 느림

![img](https://storage.worksmobile.com/k/whome/t/kr1.168601/168601/4000000001283909002/4000000001350922002.0.3472332412858595080/i/w700)

  - (SSL) **디지털 인증서 & 디지털 서명**
    - 클라이언트와 서버간의 통신을 공인된 제 3자(혹은 기업이나 업체)가 보증해주는 문서
    - 디지털 서명을 통해 누가 메시지를 보낸 것이며, 메시지가 위조되지 않았음을 증명하는 것

    - 데이터를 안전하게 전달할 뿐만 아니라, 데이터 제공자의 신원을 보장할 수 있음
      - 송신자는 비공개 키(secret key)로 정보를 암호화하여, 공개 키와 함께 암호화된 데이터를 전송
      - 수신자는 공개 키로 암호화된 정보를 복호화 하여 읽어들임
      - 여기서 데이터를 공개 키로 복호화했다는 것은, 해당 데이터가 공개 키와 한 쌍을 이루는 비공개 키에 의해 암호화되었음을 의미하는 것
      - 다시 말해, 제대로 전달된 공개 키가 송신자의 신원을 보장해주는 것(디지털 서명)

  - 암호화된 http 메시지를 교환하기 전 클라이언트와 서버는 **SSL 핸드쉐이크** 과정을 거쳐야 함
      - 서버와 클라이언트가 서로 연락하여 클라이언트가 여러 암호화 방식을 제시하면 서버가 여기서 하나를 선택하여 공개 키와 함께 응답
      - 클라이언트는 이후 암호화 통신에 사용할 키를 생성하여 서버에 전달하며, 전달된 키는 서버가 전달한 공개 키에 의해 암호화되어 보내짐
      - 위의 과정이 마무리되면 클라이언트와 서버 모두 finished 메시지를 주고 받으며, 이후부터는 클라이언트가 생성한 키를 이용하여 데이터가 암호화되는 것 

